---
title: "Основы Статистики"
author: "Анатолий Карпов"
output:
  html_document: default
  pdf_document: default
header-includes: \usepackage[english, russian]{babel}
---

```{r setup, include = FALSE}
library(ggplot2)
knitr::opts_chunk$set(echo = FALSE, message = F, warning = F)
```
## 1. Введение (первая неделя)
<!-- ### 1.1 Информация о курсе -->
<!-- Этот курс посвящен введению в статистику. Этот курс будет состоять из трех недель: -->

<!-- * **первая неделя** - вводная, поговорим о базовых понятиях - выборка, генеральная совокупность,  -->
<!-- описательные статистики; разберемся с фразой Статистически значимые различия -->
<!-- * **вторая неделя** - регерессионный анализ, t-критерий, ANOVA -->
<!-- * **третья неделя** - корреляция и регрессия -->


<!-- ### 1.2 Генеральная совокупность и выборка -->
<!-- #### 1.2.1 План урока -->

<!-- * Понятие генеральной совокупности и выборки, репрезентативность выборки -->
<!-- * Простая случайная выборка -->
<!-- * Стратифицированная выборка -->
<!-- * Групповая выборка -->

<!-- #### 1.2.2 Лекция -->
<!-- **Генеральная совокупность** - множество всех тех объектов, относительно  -->
<!-- которых мы будем делать выводы. -->

<!-- Например статистика по росту вех людей побывавших на луне; **ГС** будет  -->
<!-- все эти люди, их легко посчитать, изиерить рост и т.д. Но в большинстве случаев  -->
<!-- объемы **ГС** очень велики (в некоторых биологических исследованиях объем  -->
<!-- популяции может насчитывать несколько тысяч представителей).  -->
<!-- Для того чтобы решить эту проблему исследователь выбирает только часть  -->
<!-- **ГС** т.е. формирует **выборку**: -->

<!-- **Выборка** - часть **ГС**, результаты исследования которой можно обообщить  -->
<!-- на **ГС**. -->

<!-- Очень важным условием является репрезентативность выборки, т.е. мы хотим чтобы  -->
<!-- наша **выборка** была моделью **ГС**, отражала свойства **ГС**. -->

<!-- Чтобы этого добиться существует несколько вариантов формирования репрезентативной выборки. -->

<!-- #### 1.2.3 Задача -->
<!-- Если мы провели исследование с целью выявить уровень знаний в области биологии  -->
<!-- на 100 студентах биологического факультета СПбГУ, то на какую совокупность мы  -->
<!-- можем распространить наши выводы? -->

<!-- Варианты ответов: -->

<!-- + Студенты СПБГУ -->
<!-- + **Студенты биологического факультета СПБГУ** -->
<!-- + Мужчины и женщины в возрасте от 18 до 22 лет -->

<!-- #### 1.2.4 Задача -->
<!-- Если объем выборки достаточно велик (больше 100), то такая выборка  -->
<!-- является репрезентативной? -->

<!-- * Да -->
<!-- * Нет -->
<!-- * **Зависит от способа формирования выборки** -->

<!-- #### 1.2.5 - 1.2.7 Лекции -->
<!-- Виды выборок: -->

<!-- * **Простая случайная выборка (simple random sample)** - случайным образом выбираем элементы **ГС**; -->
<!-- чем больше будет объем выбранных объектов, тем сильнее наша выборка будет походить на **ГС** по -->
<!-- своим характеристикам. -->
<!-- * **Стратифицированная выборка (stratified sample)** - разбиваем **ГС** на несколько обособленных групп -->
<!-- (strat) различных по своей природе, а уже после осуществляем выборку. -->
<!-- * **Групповая выборка (cluster sample)** - разбиваем **ГС** на кластеры очень похожие между собой -->
<!-- и уже из них случайным образом осуществляем выборку. -->

<!-- #### 1.2.8 Задача -->
<!-- Соотнесите способы формирования выборки с предложенными примерами. -->

<!-- **А**. Для того чтобы протестировать курс по введению в статистику и выяснить, насколько хорошо с ним справятся студенты Института биоинформатики, случайным образом было выбрано 50 студентов института. -->

<!-- **Б**. Для исследования взаимосвязи риска развития заболевания и группы крови человека потенциальных участников исследования разделили на четыре группы (в соответствии с группой крови). Затем из каждой группы случайным образом извлекли по 50 человек. -->

<!-- **В**. Чтобы проверить знания школьников Санкт-Петерубрга по математике, было организовано исследование. Случайным образом было выбрано 10 школ, затем из каждой школы случайным образом было отобрано по 50 учащихся разных классов. -->

<!-- Ответы: -->

<!-- * А - Простая случайная выборка (random sample) -->
<!-- * Б - Стратифицированная выборка (stratified sample) -->
<!-- * В - Групповая выборка (cluster sample)  -->

<!-- #### 1.2.9 Задача -->
<!-- Предположим, после лекции по статистике, один студент решил выяснить, как хорошо  -->
<!-- **студенты психологического факультета** разбираются в этом предмете.  -->
<!-- Он подготовил серию заданий и пригласил 30 своих друзей с факультета принять  -->
<!-- участие в тестировании. Исследователь утверждает, что он сформировал  -->
<!-- простую случайную выборку. Так ли это? -->

<!-- * **Это не простая случайная выборка. Не каждый член генеральной совокупности  -->
<!-- мог равновероятно принять участие в тестировании, т.к. исследователь позвал  -->
<!-- только своих друзей**. -->
<!-- * Такая выборка должна рассматриваться, как стратифицированная выборка.  -->
<!-- Можно сказать, что исследователь разделил всех студентов на страты по 30  -->
<!-- человек и выбрал только одну из них для исследования. -->
<!-- * Такая выборка может рассматриваться, как простая случайная выборка.  -->
<!-- Тридцать человек действительно являются студентами данного факультета. -->

<!-- ### 1.3 Типы переменных -->
<!-- #### 1.3.1 План урока -->

<!-- * Типы переменных -->
<!-- * Количественные переменные -->
<!-- * Номинативные переменные -->
<!-- * Ранговые переменные -->

<!-- #### 1.3.2 - 1.3.4 Лекции -->
<!-- Глобально все переменные можно разделить на два типа - **количественные**  -->
<!-- и **качественные** (номинативные) -->

<!-- **Количественные переменные** - измеренные значения некоторого признака. -->
<!-- Если переменная может принимать любое значение на промежутке, то такая  -->
<!-- переменная называется **непрерывной**. Например рост испытуемых может оказаться  -->
<!-- в промежутке от 160 до 190 см. **Дискретные** количественные переменные принимают только  -->
<!-- определенные значения. Например количество детей в семье. -->

<!-- **Номинативные** (качественные) переменные используются для разделения наших испытуемых  -->
<!-- (объектов) на группы. Напоимер, все участники женского пола будут обозначены  -->
<!-- цифрой **1**, а участники мужского пола - цифрой **2** -->

<!-- В номинативных переменных за цифрами не стоит никакого математического смысла. -->
<!-- В данном случае цифры это всего лишь маркеры или лейблы, которые делят  -->
<!-- наших испытуемых на группы -->

<!-- #### 1.3.5 Задача -->
<!-- Какие из перечисленных переменных, вероятнее всего, являются дискретными? -->

<!-- * **Число слушателей онлайн курса по статистике, набравших максимальный балл** -->
<!-- * Пол человека -->
<!-- * Имена ваших друзей -->
<!-- * Средний годовой доход -->
<!-- * Расстояние от Санкт-Петербурга до других городов России -->
<!-- * **Количество домашних животных в семье** -->

<!-- #### 1.3.6 Лекция -->
<!-- **Ранговые переменные** - упорядоченные дискретные перменные.  -->
<!-- Например финиширующие в марафонском беге. -->

<!-- #### 1.3.7 Задача -->
<!-- Два основных типа переменных в статистике: -->

<!-- * Непрерывные и количественные -->
<!-- * **Качественные и количественные** -->
<!-- * Качественные и номинативные -->
<!-- * Ранговые и номинативные -->

<!-- #### 1.3.8 Задача -->
<!-- Соотнесите примеры переменных и их типы: -->

<!-- * Количественная (дискретная) переменная - Количество публикаций у ученого -->
<!-- * Количественная (непрерывная) переменная - Рост в мм -->
<!-- * Ранговая переменная - Успевавемость студентов (упорядоченный список студентов по успеваемости) -->
<!-- * Номинативная переменная - Группа крови -->

<!-- #### 1.3.9 Задача -->
<!-- Если рост 10 участников исследования представлен в ранговой шкале (по убыванию: 1-самый высокий, 2 - ниже и т.д.), тогда верным утверждением будет:  -->

<!-- * Испытуемый с рангом 4 на два см ниже, чем испытуемый с рангом 6. -->
<!-- * Ни одно из утверждений верным не является. -->
<!-- * У испытуемых с рангом 1 и 3 такая же разница в росте, как и у испытуемых с рангами 3 и 5. -->
<!-- * **Испытуемый с рангом 4 выше, чем испытуемый с рангом 6, но ниже, чем испытуемый с рангом 2.** -->

<!-- ### 1.4 Меры центральной тенденции -->
<!-- #### 1.4.1 План урока -->

<!-- * Понятие описательной статистики -->
<!-- * Мода -->
<!-- * Медиана -->
<!-- * Среднее значение -->
<!-- * Выбор меры центральной тенденции -->
<!-- * Свойства среднего -->

<!-- #### 1.4.2 Лекция -->
<!-- **Эмпирические данные** - данные полученные опытным путём. -->

<!-- **Описательная (дескриптивная) статистика** - обработка данных полученных эмпирическим путём и их систематизация, наглядное представление в форме графиков, таблиц, а также их количественное описание посредством основных статистических показателей. -->

<!-- **Распределение вероятностей** - это закон, описывающий область значений случайной величины и вероятность её появления (частоту) в данной области. То есть насколько часто X появляется в данном диапазоне значений. -->

<!-- **Гистограмма частот** - ступенчатая функция показывающая насколько часто вероятно появление величины в указанном диапазоне значений. -->

#### 1.4.3 Лекция
**Мода (Mode)** - значение измеряемого признака, которое встречается максимально часто.

```{r, fig.height = 3}
# fig.height - размер изображение после knit'a
a <- c(157, 159, 161, 164, 165, 166, 167, 167, 167, 168,
       169, 169, 170, 170, 170, 171, 171, 172, 172, 172, 
       172, 173, 173, 175, 175, 177, 178, 178, 179, 185)
d <- data.frame(x = a)                 # основные данные
d_red <- data.frame(x = rep(172, 4))   # красная мода
ggplot() + 
  geom_dotplot(data = d, aes(x)) + 
  geom_dotplot(data = d_red, aes(x), color = "red", fill = "red") +
  scale_x_continuous(breaks = seq(155, 190, 5)) +
  scale_y_continuous(limits = c(0, 12.1),    # 12.1 - найдено методом математического подгона
                     breaks = seq(0, 12, 4)) +
  annotate("text", x = 172, y = 6.5, label = "mode = 172", size = 5)
```

Если из нашей выборки удалить всего одно значени 172, то она получит три моды.

#### 1.4.4 Лекция

**Медиана (Median)** - значение признака,которое делит упорядоченное множество пополам

Сначала нужно упорядочить выборку, а потом найти такое значени, которое поделит ее на две равные части
Возьмем первые девять элементов нашей выборки:

```{r, fig.height = 3}
a <- c(157, 159, 161, 164, 165, 166, 167, 167, 167)
d <- data.frame(x = a)
ggplot(d, aes(x)) + 
  geom_vline(data = d, aes(xintercept = median(x)),
             color = "red", linetype = "dotted", size = 1) +
  geom_dotplot() +
  scale_x_continuous(breaks = seq(155, 168, 1)) +
  scale_y_continuous(limits = c(0, 12.1),   
                     breaks = seq(0, 12, 3)) +
  annotate("text", x = 163.5, y = 6, label = "median = 165", size = 5)
```

В данном случае четыре слева и четыре справа; медиана равна **165**

Теперь возьмем все данные:

```{r, fig.height = 3}
a <- c(157, 159, 161, 164, 165, 166, 167, 167, 167, 168,
       169, 169, 170, 170, 170, 171, 171, 172, 172, 172, 
       172, 173, 173, 175, 175, 177, 178, 178, 179, 185)
d <- data.frame(x = a)
ggplot(d, aes(x)) + 
  geom_dotplot() +
  geom_vline(data = d, aes(xintercept = median(x)),
             color = "red", linetype = "dotted", size = 1) +
  scale_x_continuous(breaks = seq(155, 190, 5)) +
  scale_y_continuous(limits = c(0, 12.1),
                     breaks = seq(0, 12, 4)) +
  annotate("text", x = 174.6, y = 6, label = "median = 170.5", size = 5)
```

Точка, которая будет делить наши данные на две равные части, находится между 
**170** и **171**; в данном случае медианой будет являться среднее значение 
двух признаков: $Me = \frac{170 + 171}{2} = 170.5$

#### 1.4.5 Лекция
**Среднее значение (mean, среднее арифметическое)** - сумма всех измеренных
признаков, деленное на их количество.

```{r, fig.height = 3}
a <- c(157, 159, 161, 164, 165, 166, 167, 167, 167, 168,
       169, 169, 170, 170, 170, 171, 171, 172, 172, 172, 
       172, 173, 173, 175, 175, 177, 178, 178, 179, 185)
d <- data.frame(x = a)
ggplot(d, aes(x)) + 
  geom_dotplot() +
  geom_vline(data = d, aes(xintercept = mean(x)),
             color = "red", linetype = "dotted", size = 1) +
  scale_x_continuous(breaks = seq(155, 190, 5)) +
  scale_y_continuous(limits = c(0, 12.1),
                     breaks = seq(0, 12, 4)) +
  annotate("text", x = 174.6, y = 6, label = "mean = 170.4", size = 5)
```


